<!-- Gallery v2 (inline styles, runtime random 5-letter prefix, mobile 1col / desktop 4col) -->
<div data-role="gallery-root" style="max-width:1200px !important;margin:0 auto !important;padding:12px !important;box-sizing:border-box !important;">

  <div data-role="grid" style="display:grid !important;grid-template-columns:1fr !important;gap:12px !important;box-sizing:border-box !important;">

    <!-- 1 -->
    <a data-role="item" data-index="1" style="display:block !important;">
      <img src="https://lh3.googleusercontent.com/EJ80fSSeeNOJJhGW1eKGR8jlT_YeiVzAoEfLf0imBNQRjXI57Xa4Il8kXDnsYkm5rtwN5-Fuc9CrhBTKjRDafv_cPxnz6c5IXDyNMSPNhoaKm0PBpP8R=w800" alt="021.jpg" style="width:100% !important;height:auto !important;display:block !important;border-radius:6px !important;cursor:pointer !important;box-sizing:border-box !important;">
    </a>
    <!-- 2 -->
    <a data-role="item" data-index="2" style="display:block !important;">
      <img src="https://lh3.googleusercontent.com/a-uGkAsliZtcApNi8Bz7Oh0joXs-MmiPBR2u0lQfeOAA2OyZGcbAyq18FJAD3GVQcl2wmOPJeFCSdITyveOCT1KtduvUh6ogh1KSziq-s1ZCOYSwa6e0=w800" alt="023.jpg" style="width:100% !important;height:auto !important;display:block !important;border-radius:6px !important;cursor:pointer !important;box-sizing:border-box !important;">
    </a>
    <!-- 3 -->
    <a data-role="item" data-index="3" style="display:block !important;">
      <img src="https://lh3.googleusercontent.com/7TsHYoPrKevHcfBi2lrlbuTDYhfMRPJsyCKh3v-j0DwYb-2yV75xHi0ugsYxwMmVn5OfG7xLeowJTbbyDV5rC3xXt8y4GaueLdbF-QnRi9h63WWooKvFGg=w800" alt="004(0001).jpg" style="width:100% !important;height:auto !important;display:block !important;border-radius:6px !important;cursor:pointer !important;box-sizing:border-box !important;">
    </a>
    <!-- 4 -->
    <a data-role="item" data-index="4" style="display:block !important;">
      <img src="https://lh3.googleusercontent.com/pndek1jSbiEl2tZ4mLHJllBRoBVWX5OY8lreItFbZgonEfIbXdLxCAGmCXVqH1ozGGDmSbG984AFHS-7SJKNjCukM6KL03hcix_U7wrDSmfHyohiBzyp_5I=w800" alt="005(0001).jpg" style="width:100% !important;height:auto !important;display:block !important;border-radius:6px !important;cursor:pointer !important;box-sizing:border-box !important;">
    </a>
    <!-- 5 -->
    <a data-role="item" data-index="5" style="display:block !important;">
      <img src="https://lh3.googleusercontent.com/OydpBe_EVshVlKcrxZMLdoXbqUC9TfqJYz-j_2AiC6HnwrOQ2iWQSXFZXl-PIF1PJjuYXYcuVfwe0-3zH7HeORy6WfUNbStx4DhUWcuRElMCpThdK4d6Tw=w800" alt="006(0001).jpg" style="width:100% !important;height:auto !important;display:block !important;border-radius:6px !important;cursor:pointer !important;box-sizing:border-box !important;">
    </a>
    <!-- 6 -->
    <a data-role="item" data-index="6" style="display:block !important;">
      <img src="https://lh3.googleusercontent.com/2AAzl6O_6KrWY-Re8jHxj3G9fddcBCxRXQVOC7h8DpetrKvXc0Gyq0FD3PlMVH4YiAqrzb2Tx7_WYj6ZNmCuDYuYNhN3M9TJ-uJ6P6hB3nMe0J_AMkTNiv0=w800" alt="007(0001).jpg" style="width:100% !important;height:auto !important;display:block !important;border-radius:6px !important;cursor:pointer !important;box-sizing:border-box !important;">
    </a>
    <!-- 7 -->
    <a data-role="item" data-index="7" style="display:block !important;">
      <img src="https://lh3.googleusercontent.com/Yd2U1866YRQEdtrxG1SENxKwMahY0fATel3SNI5eJzMpXG3mAd3i0ALkWomcLo_gC0m_cSNVXKbrOropR00bdTF4jsFsSBCkzXczWizlsxNXwWvb5mtl_g=w800" alt="017.jpg" style="width:100% !important;height:auto !important;display:block !important;border-radius:6px !important;cursor:pointer !important;box-sizing:border-box !important;">
    </a>
    <!-- 8 -->
    <a data-role="item" data-index="8" style="display:block !important;">
      <img src="https://lh3.googleusercontent.com/yhVPDubq57L4dmrb6eCItqEw2hRaBvgoybz7UJUs4u6JFZgAoIPi7XozHbmDsaY9cKCohPglHHWu-TB2lIN42eDRpK8XrV_RxEKfKiLgf7lsUEqu7Ji5gA=w800" alt="020.jpg" style="width:100% !important;height:auto !important;display:block !important;border-radius:6px !important;cursor:pointer !important;box-sizing:border-box !important;">
    </a>
    <!-- 9 -->
    <a data-role="item" data-index="9" style="display:block !important;">
      <img src="https://lh3.googleusercontent.com/s3H-VF8gPpiFsprS1DPXIJ9I3pH3rsGbmaPrllqFY4H1rkHkkI8SjADk7PN6_BzkezDybUHWd71iQrWQhABXBbpXbZU2CmL7k7jilYoxJXRkgtNbYgB0=w800" alt="019.jpg" style="width:100% !important;height:auto !important;display:block !important;border-radius:6px !important;cursor:pointer !important;box-sizing:border-box !important;">
    </a>
    <!-- 10 -->
    <a data-role="item" data-index="10" style="display:block !important;">
      <img src="https://lh3.googleusercontent.com/k-mXU_n3GrWHApJHM8-lelmccDsKt4GCrE263s-R6rMZ-WciJj-mdQ5PFdTsIeF1nsMytDyJosyR4ZQFi-5iWCkeW3wSZmkczwXe-jZJXm8Xg2PEZ8Qh8w=w800" alt="010(0001).jpg" style="width:100% !important;height:auto !important;display:block !important;border-radius:6px !important;cursor:pointer !important;box-sizing:border-box !important;">
    </a>
    <!-- 11 -->
    <a data-role="item" data-index="11" style="display:block !important;">
      <img src="https://lh3.googleusercontent.com/oP9LW0AxCgKgakGWTuF6PzZi_NF9vLQueW-NTFZxhMDjKOr4ZsCMkx3Y1EmlgBci64H0cpnvYy5WSAuYidY07mZ1vxTpZlJfS3B0ltmNQ3jq5RRLE6-EPA=w800" alt="003(0001).jpg" style="width:100% !important;height:auto !important;display:block !important;border-radius:6px !important;cursor:pointer !important;box-sizing:border-box !important;">
    </a>
    <!-- 12 -->
    <a data-role="item" data-index="12" style="display:block !important;">
      <img src="https://lh3.googleusercontent.com/UOj27sQKc74CtDNAQPuoyJs5bFmJq-FP8Pqp6zuZRZyhcynyjTqPhsS2pYjFDlDiHpM6qdu5oIqfbVqC1nUQ32uWZAFhrqewXUSEMA5RHMKIIJ5YYTl3Pg=w800" alt="002(0001).jpg" style="width:100% !important;height:auto !important;display:block !important;border-radius:6px !important;cursor:pointer !important;box-sizing:border-box !important;">
    </a>
    <!-- 13 -->
    <a data-role="item" data-index="13" style="display:block !important;">
      <img src="https://lh3.googleusercontent.com/hBWK1fpcdJNwA85BpHpHBK7wKphMZ8RLmT7VqsBsDT8tuA25e9xbIdJtGijHoKuejewE-LqGDfP3XC3SXW03D9-vjIyajy57hxXyksoGbIRop5CZ9jNM=w800" alt="001(0001).jpg" style="width:100% !important;height:auto !important;display:block !important;border-radius:6px !important;cursor:pointer !important;box-sizing:border-box !important;">
    </a>
    <!-- 14 -->
    <a data-role="item" data-index="14" style="display:block !important;">
      <img src="https://lh3.googleusercontent.com/ONNVCRz70qLMu7MTt5NJriwH9lJy6H5V-KW8BcZ1MOVk-Ivw4gJ9Hg7tklLJYTil4QqCTZC4IVr9iCnhZ0F_5w5ACEAbCqCSNdmxufIwCiaodk3d9PO_uxI=w800" alt="022.jpg" style="width:100% !important;height:auto !important;display:block !important;border-radius:6px !important;cursor:pointer !important;box-sizing:border-box !important;">
    </a>
    <!-- 15 -->
    <a data-role="item" data-index="15" style="display:block !important;">
      <img src="https://lh3.googleusercontent.com/22YdFYsxSad8BjifXlAzOLnfI5jfgMRmoHFLjHXoIXRQUbDvZwzD_bmmHa1Xrxwz-aLc3lPM5hxnSv-3_yHI5nv2S14QldX9vgE6lJbS5-uzpV88uHSwcw=w800" alt="018.jpg" style="width:100% !important;height:auto !important;display:block !important;border-radius:6px !important;cursor:pointer !important;box-sizing:border-box !important;">
    </a>
    <!-- 16 -->
    <a data-role="item" data-index="16" style="display:block !important;">
      <img src="https://lh3.googleusercontent.com/3qeGu9xcRlZyLwrFe_hj8sJqNJIfoVyJMzTx03Y3xPXDHCTYAoDioluffaNzt42SnlX6oDcLxAMnqm6-9DJv0yiReoxB0d07hwDKlmifgrLoMi7-oB6VyQ=w800" alt="016.jpg" style="width:100% !important;height:auto !important;display:block !important;border-radius:6px !important;cursor:pointer !important;box-sizing:border-box !important;">
    </a>
    <!-- 17 -->
    <a data-role="item" data-index="17" style="display:block !important;">
      <img src="https://lh3.googleusercontent.com/aBsefzL1pGwv_iGHvZQ2H30h2vOYFbfvp83CKB5n0oWESGTsw7Drdbp9jE11ZOcu1p_AUH27A0H0OiZ-X-CS4MAQM5SQMlonQa3TcE-zPRjlJkUmMApzuA=w800" alt="015(0001).jpg" style="width:100% !important;height:auto !important;display:block !important;border-radius:6px !important;cursor:pointer !important;box-sizing:border-box !important;">
    </a>
    <!-- 18 -->
    <a data-role="item" data-index="18" style="display:block !important;">
      <img src="https://lh3.googleusercontent.com/W_MJ6VTXDubM6syZ_V3dl4HUyUcTSg93sVGkS0vDoiFnqFZ9O5DARKmPNv5bQhQCggn15scud-dgfuN-6vWnVIgiA77DaWOKQw4uS0rCZunX9Ul4mVCLk14=w800" alt="014(0001).jpg" style="width:100% !important;height:auto !important;display:block !important;border-radius:6px !important;cursor:pointer !important;box-sizing:border-box !important;">
    </a>
    <!-- 19 -->
    <a data-role="item" data-index="19" style="display:block !important;">
      <img src="https://lh3.googleusercontent.com/PGz-gyenpsLwBjI168m_qe4z7OJX6JBuktiPpfpeHWeqHzseqOHOOZj29eHx53VioqNMemltbQSJdsf6wvbyhxHj1Qeeff7wyde2LLnlkgry6GAosGNaFrI=w800" alt="013(0001).jpg" style="width:100% !important;height:auto !important;display:block !important;border-radius:6px !important;cursor:pointer !important;box-sizing:border-box !important;">
    </a>
    <!-- 20 -->
    <a data-role="item" data-index="20" style="display:block !important;">
      <img src="https://lh3.googleusercontent.com/Wju2NL8Ikv6_gwKE8VBW-zW4OBAWh4wy1AMPxfbxerM5BPDgmMkloOeaWrtEZEKMZ_CK5L2BiTS7FOsoClnTUAEtaaonZRvRIBXTY8-x3sfSyHLuCPbLDGM=w800" alt="012(0001).jpg" style="width:100% !important;height:auto !important;display:block !important;border-radius:6px !important;cursor:pointer !important;box-sizing:border-box !important;">
    </a>
    <!-- 21 -->
    <a data-role="item" data-index="21" style="display:block !important;">
      <img src="https://lh3.googleusercontent.com/ywrrlk8NyBnD7_LcN_SQkVYFdz2OSEB2c2wpaXxe-Fah6wjaf99Y3r1x275bErxBMhTAjvnPu5yfCY5sP73h4Sp3-NP-HnAtoKXQ6EnSy2FQSOhsyfKTHA=w800" alt="011(0001).jpg" style="width:100% !important;height:auto !important;display:block !important;border-radius:6px !important;cursor:pointer !important;box-sizing:border-box !important;">
    </a>
    <!-- 22 -->
    <a data-role="item" data-index="22" style="display:block !important;">
      <img src="https://lh3.googleusercontent.com/qYOMKSesNHFkRusrWQFZTGiur4jyDx5wORlBjTBpXBEHbuqhdMa_AtVs6JeIfLGB19-XjLJhbYWgFqDe8LnLkPtlJg0MKJMaRF93WF6BNrjH6KjK66CKhA=w800" alt="009(0001).jpg" style="width:100% !important;height:auto !important;display:block !important;border-radius:6px !important;cursor:pointer !important;box-sizing:border-box !important;">
    </a>
    <!-- 23 -->
    <a data-role="item" data-index="23" style="display:block !important;">
      <img src="https://lh3.googleusercontent.com/ogtH9-tPSWzhro4-kZ3nCm0JxrpEh_Qifjbh_Uxf-w3XBm2JeiSzphMRxyfS2p4kxJFOImO_mLvmPymRYbcURuXcE65BIzzSPl5Q-2h8KZ0dqLc-Smmefg=w800" alt="008(0001).jpg" style="width:100% !important;height:auto !important;display:block !important;border-radius:6px !important;cursor:pointer !important;box-sizing:border-box !important;">
    </a>

  </div>
</div>

<!-- 라이트박스 -->
<div data-role="lightbox" style="position:fixed !important;inset:0 !important;background:rgba(0,0,0,.9) !important;display:none !important;justify-content:center !important;align-items:center !important;z-index:9999 !important;padding:20px !important;box-sizing:border-box !important;">
  <span data-role="lb-close" style="position:absolute !important;top:20px !important;right:30px !important;font-size:38px !important;line-height:1 !important;color:#fff !important;font-weight:700 !important;cursor:pointer !important;user-select:none !important;">×</span>
  <span data-role="lb-prev" style="position:absolute !important;top:50% !important;left:12px !important;transform:translateY(-50%) !important;font-size:28px !important;background:rgba(0,0,0,.5) !important;padding:14px 16px !important;border-radius:6px !important;color:#fff !important;font-weight:700 !important;cursor:pointer !important;user-select:none !important;">❮</span>
  <img data-role="lb-img" src="" alt="expanded" style="max-width:90vw !important;max-height:85vh !important;width:auto !important;height:auto !important;border-radius:4px !important;box-sizing:border-box !important;">
  <span data-role="lb-next" style="position:absolute !important;top:50% !important;right:12px !important;transform:translateY(-50%) !important;font-size:28px !important;background:rgba(0,0,0,.5) !important;padding:14px 16px !important;border-radius:6px !important;color:#fff !important;font-weight:700 !important;cursor:pointer !important;user-select:none !important;">❯</span>
  <span data-role="lb-count" style="position:absolute !important;top:20px !important;left:20px !important;background:rgba(0,0,0,.5) !important;padding:6px 10px !important;border-radius:4px !important;font-size:14px !important;color:#fff !important;font-weight:700 !important;user-select:none !important;"></span>
</div>
<script>
  (function(){
    // ---- 0) 루트/필수 노드 ----
    var root = document.querySelector('[data-role="gallery-root"]');
    var grid = root && root.querySelector('[data-role="grid"]');
    var lb   = document.querySelector('[data-role="lightbox"]');
    var lbImg   = lb && lb.querySelector('[data-role="lb-img"]');
    var lbClose = lb && lb.querySelector('[data-role="lb-close"]');
    var lbPrev  = lb && lb.querySelector('[data-role="lb-prev"]');
    var lbNext  = lb && lb.querySelector('[data-role="lb-next"]');
    var lbCount = lb && lb.querySelector('[data-role="lb-count"]');
    if (!root || !grid || !lb || !lbImg) return;

    // ---- 1) 중복 초기화 가드 (리치에디터/미리보기 중복 실행 방지) ----
    if (root.dataset.dnInit === '1') return;
    root.dataset.dnInit = '1';

    // ---- 2) 랜덤 프리픽스(충돌 방지용) ----
    function randPrefix(n){for(var s='',c='abcdefghijklmnopqrstuvwxyz',i=0;i<n;i++)s+=c[Math.floor(Math.random()*c.length)];return s;}
    var px = randPrefix(5);
    root.id = px + '-gallery';
    grid.classList.add(px + '-grid');
    lb.id = px + '-lightbox';

    // ---- 3) 아이템 수집 ----
    var items = root.querySelectorAll('[data-role="item"] img');

    // ---- 4) 그리드 컬럼 (모바일 1열 / 데스크톱 4열) ----
    function setCols(n){
      var base = "display:grid !important;gap:12px !important;box-sizing:border-box !important;";
      grid.setAttribute('style', base + "grid-template-columns: repeat(" + n + ", 1fr) !important;");
    }
    var isMobileUA = /Android|iPhone|iPad|iPod|Mobile|IEMobile|BlackBerry|Kindle|Silk|Opera Mini/i.test(navigator.userAgent);
    function reapply(){ isMobileUA ? setCols(1) : setCols(4); }
    reapply();
    document.addEventListener('DOMContentLoaded', reapply);
    window.addEventListener('load', reapply);
    window.addEventListener('resize', reapply);
    window.addEventListener('orientationchange', reapply);
    setTimeout(reapply, 80);
    setTimeout(reapply, 400);

    // ---- 5) 안전한 뷰포트 단위 (--vh) 설정 & 적용 ----
    function setSafeVH(){
      var vh = (window.visualViewport ? window.visualViewport.height : window.innerHeight) * 0.01;
      document.documentElement.style.setProperty('--vh', vh + 'px');
      // 라이트박스 열려있으면 높이 즉시 반영
      if (lb.dataset.open === '1') {
        lb.style.height = 'calc(var(--vh) * 100)';
        lbImg.style.maxHeight = 'calc(var(--vh) * 85)'; // 85vh 대체
      }
    }
    setSafeVH();
    window.addEventListener('resize', setSafeVH);
    if (window.visualViewport) window.visualViewport.addEventListener('resize', setSafeVH);

    // ---- 6) 라이트박스 상태/도움 함수 ----
    var cur = 0, isOpen = false, scrollTop = 0;

    function applyBodyLock(){
      scrollTop = window.pageYOffset || document.documentElement.scrollTop || 0;
      document.body.style.position = 'fixed';
      document.body.style.width = '100%';
      document.body.style.top = (-scrollTop) + 'px';
      document.body.style.overflow = 'hidden';
    }
    function releaseBodyLock(){
      document.body.style.position = '';
      document.body.style.width = '';
      document.body.style.top = '';
      document.body.style.overflow = '';
      window.scrollTo(0, scrollTop);
    }

    function updateCount(){ if (lbCount) lbCount.textContent = (cur+1) + ' / ' + items.length; }

    function show(i){
      cur = i;
      // 원본 고화질: 구글 파라미터 제거/대체
      var src = items[i].getAttribute('src') || '';
      lbImg.src = src.replace(/([?&](w|s)=\d+|=w\d+|=s\d+)?$/, '=s0');

      updateCount();
      lb.style.display = 'flex';
      lb.dataset.open = '1';
      isOpen = true;

      // 안전 뷰포트 높이 적용
      lb.style.height = 'calc(var(--vh) * 100)';
      lbImg.style.maxHeight = 'calc(var(--vh) * 85)';

      applyBodyLock();
    }

    function hide(){
      if (!isOpen) return;
      lb.style.display = 'none';
      lb.dataset.open = '0';
      isOpen = false;
      lbImg.src = ''; // 메모리 절약/깜빡임 방지
      releaseBodyLock();
    }

    function prev(){ show((cur - 1 + items.length) % items.length); }
    function next(){ show((cur + 1) % items.length); }

    // ---- 7) 바인딩 (중복 전파 방지 포함) ----
    items.forEach(function(img, i){
      img.addEventListener('click', function(e){
        e.preventDefault();
        e.stopPropagation();
        show(i);
      }, {passive:false});
    });

    if (lbClose) lbClose.addEventListener('click', function(e){
      e.preventDefault();
      e.stopPropagation(); // 바깥 클릭 핸들러로 전파 금지
      hide();
    });
    if (lbPrev)  lbPrev.addEventListener('click', function(e){
      e.preventDefault();
      e.stopPropagation();
      prev();
    });
    if (lbNext)  lbNext.addEventListener('click', function(e){
      e.preventDefault();
      e.stopPropagation();
      next();
    });

    // 라이트박스 배경 클릭 시 닫기 (컨트롤 클릭은 stopPropagation 처리)
    lb.addEventListener('click', function(e){
      if (e.target === lb) hide();
    });

    // 키보드 제어
    document.addEventListener('keydown', function(e){
      if (!isOpen) return;
      if (e.key === 'Escape') hide();
      else if (e.key === 'ArrowLeft') prev();
      else if (e.key === 'ArrowRight') next();
    });

    // iOS 터치 스크롤 방지 (오버레이 열렸을 때만)
    window.addEventListener('touchmove', function(e){
      if (isOpen) e.preventDefault();
    }, { passive:false });
  })();
</script>