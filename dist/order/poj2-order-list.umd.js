!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react")):"function"==typeof define&&define.amd?define(["react"],t):"object"==typeof exports?exports.Poj2OrderList=t(require("react")):e.Poj2OrderList=t(e.React)}("undefined"!=typeof self?self:this,e=>(()=>{"use strict";var t={12:t=>{t.exports=e}},a={};function r(e){var l=a[e];if(void 0!==l)return l.exports;var n=a[e]={exports:{}};return t[e](n,n.exports,r),n.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var a in t)r.o(t,a)&&!r.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var l={};r.d(l,{default:()=>u});var n=r(12);const o=[{label:"주문/배송",href:"/myzone/orders?status=all",isActive:!0},{label:"취소/교환/반품",href:"/myzone/orders?status=cancelled"}],s=[{value:"recent-1month",label:"최근 1개월"},{value:"recent-3months",label:"최근 3개월"},{value:"recent-6months",label:"최근 6개월"},{value:"2025",label:"2025년"},{value:"2024",label:"2024년"},{value:"2023",label:"2023년"}],c=[{value:"all",label:"전체보기"},{value:"order-received",label:"주문접수"},{value:"payment-completed",label:"결제완료"},{value:"preparing",label:"상품준비중"},{value:"shipping",label:"배송중"},{value:"delivered",label:"배송완료"}],i=e=>e.toLocaleString("ko-KR"),d=e=>{const t=new Date(e);return`${t.getMonth()+1}/${t.getDate()}(${["일","월","화","수","목","금","토"][t.getDay()]})`},m=()=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 -960 960 960",className:"w-4 h-4 fill-current"},n.createElement("path",{d:"M517.85-480 354.92-642.92q-8.3-8.31-8.5-20.89-.19-12.57 8.5-21.27 8.7-8.69 21.08-8.69 12.38 0 21.08 8.69l179.77 179.77q5.61 5.62 7.92 11.85 2.31 6.23 2.31 13.46t-2.31 13.46q-2.31 6.23-7.92 11.85L397.08-274.92q-8.31 8.3-20.89 8.5-12.57.19-21.27-8.5-8.69-8.7-8.69-21.08 0-12.38 8.69-21.08L517.85-480Z"})),p=()=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 -960 960 960",className:"fill-current w-5 h-5"},n.createElement("path",{d:"M380-320q-109 0-184.5-75.5T120-580q0-109 75.5-184.5T380-840q109 0 184.5 75.5T640-580q0 44-14 83t-38 69l224 224q11 11 11 28t-11 28q-11 11-28 11t-28-11L532-372q-30 24-69 38t-83 14Zm0-80q75 0 127.5-52.5T560-580q0-75-52.5-127.5T380-760q-75 0-127.5 52.5T200-580q0 75 52.5 127.5T380-400Z"}));function u({tabs:e=o,title:t="주문/배송 조회",showTitle:a=!0,periodOptions:r=s,statusOptions:l=c,orders:i,defaultPeriod:d="recent-1month",defaultStatus:m="all",defaultSearch:u="",isLoading:g=!1,error:x=null,debug:f=!1,onTabClick:E,onFilterChange:v,onLinkClick:y,onButtonClick:N,onSearchSubmit:h,skinProps:w}){const[I,k]=n.useState(x),C=w?.data,D=w?.actions,P=w?.utils,S=n.useCallback(e=>{const t=e.carts?.[0],a=D?.getStatusInfo?D.getStatusInfo(e.status):null;return{orderId:e.orderNumber||e.id.toString(),title:t?.product?.title||"상품명 없음",option:t?.options?.options?.map(e=>`${e.groupName}: ${e.valueName}`).join(", ")||"단일상품",price:Number(t?.unitPrice)||e.totalAmount,quantity:t?.count||1,image:t?.product?.config?.img_url||"/images/product/placeholder.png",orderDate:e.createdAt,deliveryDate:e.updatedAt,deliveryStatus:a?.text||e.status}},[D]),A=n.useCallback(()=>{try{return C?.orders&&Array.isArray(C.orders)?{orders:C.orders.map(S),apiOrders:C.orders,source:"api",isEmpty:0===C.orders.length}:i&&Array.isArray(i)&&i.length>0?{orders:i,apiOrders:[],source:"props",isEmpty:!1}:{orders:[],apiOrders:[],source:C?"api":"props",isEmpty:!0}}catch(e){return console.error("Order data transformation error:",e),k(e instanceof Error?e.message:"데이터 처리 중 오류가 발생했습니다."),{orders:[],apiOrders:[],source:"error",isEmpty:!0}}},[C,i,S]),{orders:L,apiOrders:R,source:T,isEmpty:O}=A(),j=C?.title||C?.componentProps?.title||t,Z=C?.loading||g,q=C?.error||I,M=!1!==C?.isUserLoggedIn,z=C?.searchQuery||u,H=C?.selectedStatus||m,G=C?.selectedDateRange||d,$=C?.emptyText||C?.componentProps?.emptyText||"주문 내역이 없습니다.",[F,V]=n.useState(z);n.useEffect(()=>{f&&console.log("OrderList Debug Info:",{dataSource:T,ordersCount:L?.length,apiOrdersCount:R?.length,skinPropsData:C,currentIsLoading:Z,currentHasError:q,isEmpty:O})},[f,T,L,R,C,Z,q,O]),n.useEffect(()=>{k(null);try{if(C&&!Array.isArray(C.orders))throw new Error("API 주문 데이터가 배열이 아닙니다.");if(i&&!Array.isArray(i))throw new Error("props 주문 데이터가 배열이 아닙니다.")}catch(e){console.error("Order data validation error:",e),k(e instanceof Error?e.message:"데이터 유효성 검사 실패")}},[C,i]),n.useEffect(()=>{V(z)},[z]);const _=(e,t)=>{D&&("period"===e?D.setSelectedDateRange(t):"status"===e&&D.setSelectedStatus(t)),v&&v(e,t)};if(Z)return n.createElement("div",{className:"lg:pt-10 pb-15 lg:pb-30"},n.createElement("div",{className:"max-lg:px-4 text-center py-20"},n.createElement("p",null,P?.t?P.t("주문 내역을 불러오는 중입니다..."):"주문 내역을 불러오는 중입니다..."),f&&n.createElement("p",{className:"text-sm text-gray-500 mt-2"},"데이터 소스: ",T)));if(q){const e="string"==typeof q?q:P?.t?P.t("주문 내역을 불러오는데 실패했습니다"):"주문 내역을 불러오는데 실패했습니다";return n.createElement("div",{className:"lg:pt-10 pb-15 lg:pb-30"},n.createElement("div",{className:"max-lg:px-4 text-center py-20"},n.createElement("p",{className:"text-red-600 mb-4"},e),f&&n.createElement("div",{className:"text-sm text-gray-500 mb-4"},n.createElement("p",null,"데이터 소스: ",T),n.createElement("p",null,"에러 타입: ",typeof q)),n.createElement("button",{className:"px-4 py-2 bg-accent text-white rounded hover:bg-accent/80",onClick:()=>{k(null),window.location.reload()}},P?.t?P.t("다시 시도"):"다시 시도")))}return M?n.createElement("div",{className:"lg:pt-10 pb-15 lg:pb-30"},n.createElement("nav",{className:"sticky top-[57px] h-fit z-2 lg:hidden flex items-center bg-white"},e.map(e=>n.createElement("a",{key:e.label,className:"flex-1 block h-[50px]",href:e.href,onClick:t=>{return a=e.href,r=e.label,void(E&&(t.preventDefault(),E(a,r)));var a,r},"data-discover":"true"},n.createElement("span",{className:"flex items-center justify-center w-full h-full font-semibold "+(e.isActive?"border-b-2":"border-b border-border")},e.label)))),n.createElement("div",{className:"max-lg:px-4"},a&&n.createElement("h2",{className:"max-lg:hidden text-2xl font-semibold"},j),n.createElement("div",{className:"mt-6 mb-4"},n.createElement("form",{className:"flex max-lg:flex-wrap items-center gap-2",onSubmit:e=>{e.preventDefault(),D?.setSearchQuery&&D.setSearchQuery(F),h&&h(F),v&&v("search",F)}},n.createElement("select",{id:"period-filter",className:"flex-1 lg:w-1/3 px-4 py-2 text-sm border border-border rounded appearance-none bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIiIGhlaWdodD0iOCIgdmlld0JveD0iMCAwIDEyIDgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGQ9Ik0xIDFMNiA2TDExIDEiIHN0cm9rZT0iIzExMTExMSIgc3Ryb2tlLXdpZHRoPSIxLjUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPgo8L3N2Zz4K')] bg-no-repeat bg-[center_right_12px] focus:outline-none focus:border-accent transition-colors",value:G,onChange:e=>_("period",e.target.value)},r.map(e=>n.createElement("option",{key:e.value,value:e.value},e.label))),n.createElement("select",{id:"status-filter",className:"flex-1 lg:w-1/3 px-4 py-2 text-sm border border-border rounded appearance-none bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIiIGhlaWdodD0iOCIgdmlld0JveD0iMCAwIDEyIDgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGQ9Ik0xIDFMNiA2TDExIDEiIHN0cm9rZT0iIzExMTExMSIgc3Ryb2tlLXdpZHRoPSIxLjUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPgo8L3N2Zz4K')] bg-no-repeat bg-[center_right_12px] focus:outline-none focus:border-accent transition-colors",value:H,onChange:e=>_("status",e.target.value)},l.map(e=>n.createElement("option",{key:e.value,value:e.value},e.label))),n.createElement("div",{className:"w-full lg:w-1/3"},n.createElement("label",{htmlFor:"name-filter",className:"relative block w-full border border-border rounded focus-within:border-accent transition-colors"},n.createElement("input",{id:"name-filter",placeholder:P?.t?P.t("상품명을 입력해 주세요"):"상품명을 입력해 주세요",className:"w-full px-4 py-2 text-sm focus:outline-none",type:"text",value:F,onChange:e=>{V(e.target.value)}}),n.createElement("button",{type:"submit",className:"absolute right-3 top-1/2 transform -translate-y-1/2"},n.createElement(p,null))))))),n.createElement("div",{className:"max-lg:p-4"},O?n.createElement("div",{className:"text-center py-20"},n.createElement("p",{className:"text-gray-500 mb-4"},$),f&&n.createElement("div",{className:"text-sm text-gray-500 mb-4"},n.createElement("p",null,"데이터 소스: ",T),n.createElement("p",null,"API 주문 수: ",R?.length||0),n.createElement("p",null,"레거시 주문 수: ",i?.length||0)),n.createElement("button",{className:"px-4 py-2 bg-accent text-white rounded hover:bg-accent/80",onClick:()=>P?.navigate?P.navigate("/shop"):window.location.href="/shop"},P?.t?P.t("쇼핑 계속하기"):"쇼핑 계속하기")):n.createElement(n.Fragment,null,f&&n.createElement("div",{className:"mb-4 p-3 bg-yellow-50 border border-yellow-200 rounded text-sm"},n.createElement("p",null,n.createElement("strong",null,"디버그 정보:")),n.createElement("p",null,"데이터 소스: ",T),n.createElement("p",null,"표시 주문 수: ",L?.length||0),n.createElement("p",null,"API 주문 수: ",R?.length||0)),n.createElement(b,{orders:L,apiOrders:R,onLinkClick:(e,t,a)=>{if(D?.handleViewDetail&&"detail"===a.currentTarget.getAttribute("data-action")){a.preventDefault();const e=a.currentTarget.getAttribute("data-order-id"),t=L.find(t=>t.id.toString()===e);return void(t&&D.handleViewDetail(t))}y?(a.preventDefault(),y(e,t)):P?.navigate&&(a.preventDefault(),P.navigate(e))},onButtonClick:(e,t)=>{if(D)switch(e){case"cancel":if(t&&D.handleCancelOrder){const e="number"==typeof t.id?t.id:parseInt(t.orderId);D.handleCancelOrder(e)}break;case"track":case"delivery":t&&D.openDeliveryModal&&D.openDeliveryModal(t);break;case"reorder":case"addToCart":t&&D.handleAddToCartAgain&&D.handleAddToCartAgain(t);break;case"review":t&&D.openReviewModal&&D.openReviewModal(t.product,t.order)}N&&N(e,t)},utils:P,actualActions:D,dataSource:T}),C?.pagination&&C.pagination.totalPages>1&&n.createElement("div",{className:"flex justify-center mt-8"},n.createElement("div",{className:"flex items-center gap-2"},n.createElement("button",{onClick:()=>D?.handlePageChange?.(1),disabled:1===C.pagination.currentPage,className:"px-3 py-1 text-sm border border-border rounded disabled:opacity-50"},P?.t?P.t("처음"):"처음"),n.createElement("button",{onClick:()=>D?.handlePageChange?.(C.pagination.currentPage-1),disabled:1===C.pagination.currentPage,className:"px-3 py-1 text-sm border border-border rounded disabled:opacity-50"},P?.t?P.t("이전"):"이전"),n.createElement("span",{className:"px-3 py-1 text-sm"},C.pagination.currentPage," / ",C.pagination.totalPages),n.createElement("button",{onClick:()=>D?.handlePageChange?.(C.pagination.currentPage+1),disabled:C.pagination.currentPage===C.pagination.totalPages,className:"px-3 py-1 text-sm border border-border rounded disabled:opacity-50"},P?.t?P.t("다음"):"다음"),n.createElement("button",{onClick:()=>D?.handlePageChange?.(C.pagination.totalPages),disabled:C.pagination.currentPage===C.pagination.totalPages,className:"px-3 py-1 text-sm border border-border rounded disabled:opacity-50"},P?.t?P.t("마지막"):"마지막")))))):n.createElement("div",{className:"lg:pt-10 pb-15 lg:pb-30"},n.createElement("div",{className:"max-lg:px-4 text-center py-20"},n.createElement("p",{className:"mb-4"},P?.t?P.t("주문 내역을 확인하려면 로그인이 필요합니다."):"주문 내역을 확인하려면 로그인이 필요합니다."),n.createElement("button",{className:"px-4 py-2 bg-accent text-white rounded hover:bg-accent/80",onClick:()=>P?.navigate?P.navigate("/login"):window.location.href="/login"},P?.t?P.t("로그인"):"로그인")))}function b({orders:e,apiOrders:t=[],onLinkClick:a,onButtonClick:r,utils:l,actualActions:o,dataSource:s}){const c="api"===s&&t.length>0,p=!c&&e&&e.length>0,u=e=>o?.getStatusInfo?o.getStatusInfo(e):{REQUESTED:{text:"주문 요청됨",class:"status-requested",icon:"📋"},PENDING:{text:"결제 대기 중",class:"status-pending",icon:"⏳"},PREPARING:{text:"상품 준비 중",class:"status-preparing",icon:"📦"},PAID:{text:"결제 완료",class:"status-paid",icon:"💰"},SHIPPING:{text:"배송 중",class:"status-shipping",icon:"🚚"},ARRIVED:{text:"배송 도착",class:"status-arrived",icon:"🏠"},FINISHED:{text:"배송 완료",class:"status-finished",icon:"✅"},ISSUE:{text:"배송 문제 발생",class:"status-issue",icon:"⚠️"},CANCELLED:{text:"주문 취소됨",class:"status-cancelled",icon:"❌"},CANCELED:{text:"주문 취소됨",class:"status-cancelled",icon:"❌"},REFUNDED:{text:"환불 완료",class:"status-refunded",icon:"💸"}}[e]||{text:e,class:"status-default",icon:"📋"},b=e=>l?.formatCurrency?l.formatCurrency(e):i(e);return n.createElement("ul",{className:"space-y-4"},c&&t.map(e=>{return n.createElement("li",{key:e.id,className:"w-full border border-border bg-white"},n.createElement("div",{className:"flex items-center justify-between pl-3 lg:pl-4 pr-1 lg:pr-2 py-2 lg:py-3 border-b border-border text-sm"},n.createElement("p",null,l?.t?l.t("주문번호"):"주문번호",": ",e.orderNumber||e.id),n.createElement("a",{className:"flex items-center gap-1 font-semibold text-black/70 lg:text-description lg:hover:text-black transition-colors",href:`/myzone/order-detail/${e.id}`,onClick:t=>a(`/myzone/order-detail/${e.id}`,"주문상세보기",t),"data-discover":"true","data-action":"detail","data-order-id":e.id.toString()},n.createElement("span",null,l?.t?l.t("주문상세보기"):"주문상세보기"),n.createElement(m,null))),n.createElement("div",{className:"px-3 lg:px-4 py-2 border-b border-border bg-gray-50"},n.createElement("div",{className:"flex items-center justify-between"},n.createElement("div",{className:"flex items-center gap-2"},n.createElement("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded text-sm ${u(e.status).class}`},n.createElement("span",null,u(e.status).icon),u(e.status).text),n.createElement("span",{className:"text-sm text-gray-600"},(t=e.createdAt,o?.formatDate?o.formatDate(t):l?.formatDate?l.formatDate(t):d(t)))),n.createElement("div",{className:"text-sm font-semibold"},l?.t?l.t("총 결제금액"):"총 결제금액",": ",b(e.totalAmount),"원"))),e.carts.map(t=>n.createElement("div",{key:t.id,className:"lg:grid lg:grid-cols-[1fr_220px]"},n.createElement("div",{className:"flex items-center gap-3 lg:gap-4 p-3 lg:p-4"},n.createElement("div",{className:"shrink-0"},n.createElement("a",{href:`/myzone/order-detail/${e.id}`,onClick:r=>a(`/myzone/order-detail/${e.id}`,t.product.title,r),"data-discover":"true","data-action":"detail","data-order-id":e.id.toString()},n.createElement("img",{alt:t.product.title,className:"w-[90px] h-[90px] lg:w-28 lg:h-28 object-cover rounded",src:t.product.config?.img_url||"/images/product/placeholder.png"}))),n.createElement("div",{className:"flex-1"},n.createElement("p",{className:"mt-0.5 lg:mt-1 text-sm lg:text-base font-semibold truncate"},t.product.title),t.options?.options&&t.options.options.length>0&&n.createElement("div",{className:"mt-1 text-xs lg:text-sm text-description"},t.options.options.map((e,t)=>n.createElement("span",{key:t,className:"mr-2"},e.groupName,": ",e.valueName))),n.createElement("p",{className:"flex items-center gap-1 text-xs lg:text-sm text-description mt-1"},n.createElement("span",null,l?.t?l.t("수량"):"수량"," ",t.count)),n.createElement("div",{className:"mt-1 lg:mt-2 flex items-center justify-between lg:block"},n.createElement("p",{className:"text-lg lg:text-xl font-bold"},b(Number(t.unitPrice)),n.createElement("span",{className:"text-sm lg:text-base font-semibold"},"원"))))),n.createElement("div",{className:"hidden lg:block border-l border-border"},n.createElement("div",{className:"h-full px-4 flex flex-col justify-center gap-2"},"PENDING"===e.status&&n.createElement("button",{type:"button",className:"w-full py-1.5 text-sm font-semibold border border-border rounded transition-colors hover:bg-black/5",onClick:()=>r("cancel",e)},l?.t?l.t("주문 취소"):"주문 취소"),["SHIPPING","ARRIVED","FINISHED"].includes(e.status)&&n.createElement("button",{type:"button",className:"w-full py-1.5 text-sm font-semibold border border-border rounded transition-colors hover:bg-black/5",onClick:()=>r("delivery",e)},l?.t?l.t("배송조회"):"배송조회"),"FINISHED"===e.status&&n.createElement("button",{type:"button",className:"w-full py-1.5 text-sm font-semibold border border-border rounded transition-colors hover:bg-black/5",onClick:()=>r("review",{product:t.product,order:e})},l?.t?l.t("리뷰 작성"):"리뷰 작성"),n.createElement("button",{type:"button",className:"w-full py-1.5 text-sm font-semibold text-accent border border-accent rounded transition-colors hover:bg-accent hover:text-white",onClick:()=>r("reorder",e)},l?.t?l.t("다시 담기"):"다시 담기"))))));var t}),p&&e.map(e=>n.createElement("li",{key:e.orderId,className:"w-full border border-border bg-white"},n.createElement("div",{className:"flex items-center justify-between pl-3 lg:pl-4 pr-1 lg:pr-2 py-2 lg:py-3 border-b border-border text-sm"},n.createElement("p",null,e.orderId),n.createElement("a",{className:"flex items-center gap-1 font-semibold text-black/70 lg:text-description lg:hover:text-black transition-colors",href:`/myzone/order-detail/${e.orderId}`,onClick:t=>a(`/myzone/order-detail/${e.orderId}`,"주문상세보기",t),"data-discover":"true"},n.createElement("span",null,"주문상세보기"),n.createElement(m,null))),n.createElement("div",{className:"lg:grid lg:grid-cols-[1fr_220px]"},n.createElement("div",{className:"flex items-center gap-3 lg:gap-4 p-3 lg:p-4"},n.createElement("div",{className:"shrink-0"},n.createElement("a",{href:`/myzone/order-detail/${e.orderId}`,onClick:t=>a(`/myzone/order-detail/${e.orderId}`,e.title,t),"data-discover":"true"},n.createElement("img",{alt:e.title,className:"w-[90px] h-[90px] lg:w-28 lg:h-28 object-cover rounded",src:e.image}))),n.createElement("div",{className:"flex-1"},n.createElement("p",{className:"flex items-center gap-2 text-sm lg:text-base font-semibold"},n.createElement("span",null,e.deliveryStatus),n.createElement("span",{className:"text-accent text-sm"},d(e.deliveryDate),"이내 도착예정")),n.createElement("p",{className:"mt-0.5 lg:mt-1 text-sm lg:text-base truncate"},e.title),n.createElement("p",{className:"flex items-center gap-1 text-xs lg:text-sm text-description"},n.createElement("span",null,e.option),n.createElement("span",null,"수량 ",e.quantity)),n.createElement("div",{className:"mt-1 lg:mt-2 flex items-center justify-between lg:block"},n.createElement("p",{className:"text-lg lg:text-xl font-bold"},i(e.price),n.createElement("span",{className:"text-sm lg:text-base font-semibold"},"원"))))),n.createElement("div",{className:"hidden lg:block border-l border-border"},n.createElement("div",{className:"h-full px-4 flex flex-col justify-center gap-2"},n.createElement("button",{type:"button",className:"w-full py-1.5 text-sm font-semibold border border-border rounded transition-colors hover:bg-black/5",onClick:()=>r("cancel",e)},"취소신청"),n.createElement("button",{type:"button",className:"w-full py-1.5 text-sm font-semibold border border-border rounded transition-colors hover:bg-black/5",onClick:()=>r("return",e)},"반품신청"),n.createElement("button",{type:"button",className:"w-full py-1.5 text-sm font-semibold text-accent border border-accent rounded transition-colors hover:bg-accent hover:text-white",onClick:()=>r("confirm",e)},"구매확정")))))))}return l.default})());